# Screen

Screen — это экран приложения для отображения данных. Он не знает откуда берутся данные, это может быть: база данных, каналы OData, API или любые другие внешние источники. Экран имеет обычные функциональные возможности современного пользовательского интерфейса. Можно настраивать внешний вид экрана, а также добавлять или удалять команды. 
    Построение внешнего вида основано на предоставленных шаблонах (Layouts) и всё, что вам нужно сделать это лишь определить какие данные будут показаны в том или ином шаблоне.



## Почему не CRUD?

Почти все популярные надстройки используют построение CRUD для пользовательских моделей, это хорошее решение, но приложение не может состоять из одних только базовых функций, Скорее всего вы будете расширять и дополнять сгенерированную логику. Хорошим примером, что стандартных операций создания/чтения/редактирование/удаления не хватает может служить возможность "Отправить на печать". ORCHID позволяет создавать CRUD с помощью "Экранов", но это не является их целью.


### Информационные объекты и экраны

ORCHID упрощает разработку бизнес-приложений благодаря активному использованию Laravel и экранов.

Экраны (или формы) используются в ORCHID для отображения данных. Экраны основаны на предопределенных шаблонах. Чтобы связать данные с экраном, вам нужно лишь указать отображаемые сущности или запросы. 


### Создание

Для создания нового экрана требуется выполнить комманду:

```php
php artisan make:screen Users
```

В директории `app/Http/Screens` будет создан файл `Users` со следующим содержанием:

```php
<?php

namespace App\Http\Screens;

use Illuminate\Http\Request;
use Orchid\Platform\Screen\Screen;

class Users extends Screen
{
    /**
     * Display header name
     *
     * @var string
     */
    public $name = 'Users Screen';

    /**
     * Display header description
     *
     * @var string
     */
    public $description = 'Users Screen';

    /**
     * Query data
     *
     * @return array
     */
    public function query() : array
    {
        return [];
    }

    /**
     * Button commands
     *
     * @return array
     */
    public function commandBar() : array
    {
        return [];
    }

    /**
     * Views
     *
     * @return array
     */
    public function layout() : array
    {
        return [];
    }
}

```

### Данные

Данные для показа на экран определяются в методе `query`, где должны происходить выборки или формирование информации.
Передача осуществлятся в виде массива, ключи будут доступены в макетах, для их управления.

```php
    /**
     * Query data
     *
     * @return array
     */
    public function query() : array
    {
        return [
            'user'  => User::find(1),
            'users' => User::paginate(),
        ];
    }
```


### Обработка

В экранах предусмотрены встроенные команды (Screen Command Bar), позволяющие пользователям выполнять различные методы.
За это отвечает метод `commandBar`, в котором описываются требуемые кнопки управления. Например:

```php
/**
* Button commands
*
* @return array
*/
public function commandBar() : array
{
return [
    Link::name('Вывести на печать')->method('print'),
];
}
```

Link отвечат, что будет происходить по нажатию на кнопку, в примере выше, при нажатии на кнопку `Вывести на печать`,
будет вызван метод экрана `print`, в Request будут доступны все данные которые пользователь видел на экране.


```php
// По нажатию будет вызван метод 'create'
Link::name('Новая функция')->method('create');

// По нажатию будете пренаправлены на указанный адрес
Link::name('Внешняя ссылка')->link('http://google.com/');

// По нажатию будет показано модальное окно (CreateUserModal),
// в котором можно выполнить метод "save"
Link::name('Модальное окно')
->modal('CreateUserModal')
->title('Добавить пользователя')
->method('save'),
```


### Макеты

Макеты отвечают за внешний вид экрана, то есть как и в каком виде данные будут показаны.
Более подробно можно прочитать в разделе [Макеты](/ru/docs/layouts/)

Каждый макет может включать в себя другой макет, то есть вложенность.
Например экран делится двумя колонками, в левой поля для заполнения, справа справочная таблица и график.
Вы можете придумать свои примеры вложения.


```php
/**
 * Views
 *
 * @return array
 */
public function layout() : array
{
    return [
        Layouts::columns([
            'Левая колонка' => [
                PatientFirstRows::class,
            ],
            'Правая колонка' => [
                PatientSecondRows::class,
            ],
        ]),
        Layouts::columns([
            'Левая колонка' => [
                AppointmentListLayout::class
            ],
            'Правая колонка' => [
                InvoiceListLayout::class
            ],
        ]),
        // Модальные окна
        Layouts::modals([
            'Appointments' => [
                PatientFirstRows::class,
            ],
        ]),
    ];
}
```



### Регистрация в маршрутах

Зарегистировать каждый экран можно с помощью метода `screen` у Route
```php
Route::screen('/news', 'NewsList','dashboard.screens.news.list');
//or
$route->screen('/news', 'NewsList','dashboard.screens.news.list');
```



#### Документация скоро будет дополнена
